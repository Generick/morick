<!--左侧导航-->
<div class="col-md-2 left-sidebar user-sel-none">
    <nav class="main-nav">
        <ul class="main-menu" id="mainMenu">
            <li class="" style="display: block">
                <a class="js-sub-menu-toggle" ui-sref="content">
                    <i class="fa fa-home"></i>
                    <span class="text">首页</span>
                </a>
            </li>

            <li class="active" id="nav_1">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-user-secret"></i>
                    <span class="text">管理员管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_101">
                        <a ui-sref="admin"><span class="text">管理员列表</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_102">
                        <a ui-sref="tenant"><span class="text">商户账号列表</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_103">
                        <a ui-sref="spreadPersons"><span class="text">推广员账号列表</span></a>
                    </li>
                     <li class="secPermission" id="secPerm_104">
                        <a ui-sref="customService"><span class="text">客服账号列表</span></a>
                    </li>
                </ul>
            </li>

            <li class="active" id="nav_2">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-users"></i>
                    <span class="text">用户管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_201">
                        <a ui-sref="user"><span class="text">用户列表</span></a>
                    </li>
                </ul>

            </li>

            <li class="active" id="nav_3">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-shopping-cart"></i>
                    <span class="text">藏品管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_301">
                        <a ui-sref="goods"><span class="text">藏品列表</span></a>
                    </li>
                </ul>
            </li>
            <li class="active" id="nav_4">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-legal"></i>
                    <span class="text">拍品管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_401">
                        <a ui-sref="auction"><span class="text">拍品列表</span></a>
                    </li>
                </ul>
            </li>
            
            <li class="active" id="nav_5">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-buysellads"></i>
                    <!--<img src="assets/images/login/outMOney.png" style="width:14px;height:14px;float:left;margin-top:3px"/>--> 
                    <span class="text">出价管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_501">
                        <a ui-sref="offerPriceCtrl"><span class="text">出价列表</span></a>
                    </li>
                </ul>
            </li>
            
        
            <li class="active" id="nav_6">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-file-text"></i>
                    <span class="text">订单管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_601">
                        <a ui-sref="order"><span class="text">订单列表</span></a>
                    </li>
                </ul>
            </li>
            <li class="active" id="nav_7">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-leanpub"></i>
                      <!--<img src="assets/images/login/widthScra.png" style="width:14px;height:14px;float:left;margin-top:3px"/>-->
                    <span class="text">提现管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_701">
                        <a ui-sref="withdraw"><span class="text">提现列表</span></a>
                    </li>
                </ul>
            </li>
            <li class="active" id="nav_8">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-user-secret"></i>
                      <!--<img src="assets/images/login/guessIc.png" style="width:14px;height:14px;float:left;margin-top:3px"/>-->
                    <span class="text">有奖竞猜</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_801">
                        <a ui-sref="quiz"><span class="text">竞猜列表</span></a>
                    </li>
                </ul>
            </li>
            <li class="active" id="nav_9">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-bar-chart"></i>
                    <span class="text">数据统计</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_901">
                        <a ui-sref="saleData"><span class="text">拍品销售记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_902">
                        <a ui-sref="rechargeData"><span class="text">充值记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_903">
                        <a ui-sref="goodsData"><span class="text">拍品上拍记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_904">
                        <a ui-sref="balanceData"><span class="text">余额修改记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_905">
                        <a ui-sref="objectGoods"><span class="text">藏品删除记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_906">
                        <a ui-sref="auctionGoods"><span class="text">拍品删除记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_907">
                        <a ui-sref="commodifydel"><span class="text">商品删除记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_908">
                        <a ui-sref="commodifysale"><span class="text">商品销售记录</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_909">
                        <a ui-sref="customHasDone"><span class="text">订单操作记录</span></a>
                    </li>
                </ul>
            </li>
            <!--<li class="active" id="nav_10" style="display: block;">
                <a class="js-sub-menu-toggle">
                    <i class="fa fa-youtube"></i>
                    <span class="text">消息推送</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_1001">
                        <a ui-sref="push"><span class="text">推送</span></a>
                    </li>
                </ul>
            </li>-->
            
            <li class="active" id="nav_10">
                <a class="js-sub-menu-toggle">
                    <i class="fa zmdi-navigation"></i>
                      <!--<img src="assets/images/login/messaIc.png" style="width:14px;height:14px;float:left;margin-top:3px"/>-->
                    <span class="text">雅学院</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_1001" style="display: block;">
                        <a ui-sref="elegant"><span class="text">雅学院</span></a>
                    </li>
                   
                </ul>
            </li>
            
            <li class="active" id="nav_11" style="display: block;">
                <a class="js-sub-menu-toggle">
                    <i class="fa icon-present"></i>
                     <!--<img src="assets/images/login/goodsoo.png" style="width:14px;height:14px;float:left;margin-top:3px"/>-->
                    <span class="text">商品管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_1101">
                        <a ui-sref="commodityList"><span class="text">商品列表</span></a>
                    </li>
                    <li class="secPermission" id="secPerm_1102">
                        <a ui-sref="commodityListAsk"><span class="text">商户商品申请列表</span></a>
                    </li>
                </ul>
            </li>
            <li class="active" id="nav_12" style="display: block;">
                <a class="js-sub-menu-toggle">
                    <i class="fa icon-globe"></i>
                     <!--<img src="assets/images/login/specilasa.png" style="width:14px;height:14px;float:left;margin-top:3px"/>-->
                    <span class="text">精选店管理</span>
                    <i class="toggle-icon fa fa-angle-down"></i>
                </a>
                <ul class="sub-menu">
                    <li class="secPermission" id="secPerm_1201">
                        <a ui-sref="specialSelling"><span class="text">精选列表</span></a>
                    </li>
                    
                </ul>
            </li>
        </ul>
    </nav>
   
    <div class="sidebar-mini-box js-toggle-mini-box">
        <i class="fa fa-angle-left"></i>
    </div>
</div>

<script charset="utf-8">
    // toggle function
  
    localStorage.removeItem("jumpData");
    $.fn.clickToggle = function(f1, f2) {
        return this.each(function() {
            var clicked = false;

            $(this).on('click', function() {
                if(clicked)
                {
                    clicked = false;
                    return f2.apply(this, arguments);
                }
                else
                {
                    clicked = true;
                    return f1.apply(this, arguments);
                }
            });
        });
    };

    $('.main-menu a.js-sub-menu-toggle').unbind().on("click", function(e) {

        e.preventDefault();
       
        localStorage.removeItem("jumpData");
        var $li = $(this).parent('li'),
            toggleClass = ($(this).next("ul").css("display") == "none")? "toggle-icon fa fa-angle-left" : "toggle-icon fa fa-angle-down";

        $li.find(' > a .toggle-icon').attr("class", toggleClass);
        $li.removeClass('active').siblings("li").addClass("active");
        $li.find('.sub-menu').slideToggle(200);
        $li.siblings("li").find(".sub-menu").slideUp(200);
        $li.siblings("li").find(' > a .toggle-icon').attr("class", 'toggle-icon fa fa-angle-down');
    });

    //缩小列表
    $('.js-toggle-mini-box').clickToggle(
        function() {
            $('.left-sidebar').addClass('mini-box');
            $(".con-parent").addClass("box-double");
            $("#mainMenu").find(".sub-menu").css({'display': 'none', 'overflow': 'hidden'});

            $('.main-menu > li > a > span.text').animate({
                opacity: 0
            }, 300);

            $('.sidebar-mini-box').find('i.fa-angle-left').toggleClass('fa-angle-right');
        },
        function() {
            $('.left-sidebar').removeClass('mini-box');
            $(".con-parent").removeClass("box-double");
            $('.main-menu > li > a > span.text').animate({
                opacity: 1
            }, 600);

            $('.sidebar-mini-box').find('i.fa-angle-left').toggleClass('fa-angle-right');
        }
    );

    setPermission();

    function setPermission() {
        var userInfo = JSON.parse(localStorage.getItem(strKey.K_USER_INFO)),
        	adminEntries = null;
        
        if(_utility.isEmpty(userInfo))
        {
        	location.href = "login.html";
        }
        else
        {
        	adminEntries = userInfo.entries;
        }
        
        if(adminEntries.length == 0)
        {
            var permissionArrCopy = commonFn.getAdminPermissions();

            for(var i in permissionArrCopy){
                if(permissionArrCopy.hasOwnProperty(i))
                {
                    $("#nav_" + permissionArrCopy[i].id).fadeIn();
                }
            }

            $(".secPermission").fadeIn();
        }
        else
        {
            for(var n = 0; n < adminEntries.length; n++)
            {
                $("#nav_"+adminEntries[n]["entryId"]).fadeIn();

                for(var k = 0;k < adminEntries[n]["children"].length; k++)
                {
                    $("#secPerm_"+adminEntries[n]["children"][k]["entryId"]).fadeIn();
                }
            }
        }
    }
</script>
